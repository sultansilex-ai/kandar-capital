<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kandar Capital | Professional Trading Journal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --bg:#0b0f1a;
  --card:#11162a;
  --text:#e5e7eb;
  --accent:#3b82f6;
  --green:#22c55e;
  --red:#ef4444;
}
*{box-sizing:border-box;font-family:Inter,system-ui}
body{margin:0;background:var(--bg);color:var(--text)}
header{
  padding:16px 24px;
  background:#020617;
  font-size:20px;
  font-weight:700;
  letter-spacing:1px;
}
nav{
  display:flex;
  gap:10px;
  padding:12px;
  background:#020617;
}
nav button{
  background:#020617;
  color:var(--text);
  border:1px solid #1e293b;
  padding:8px 14px;
  cursor:pointer;
}
nav button.active{background:var(--accent)}
section{display:none;padding:20px}
section.active{display:block}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px}
.card{
  background:var(--card);
  padding:16px;
  border-radius:10px;
}
.card h3{margin:0 0 8px;font-size:14px;color:#9ca3af}
.card p{font-size:22px;margin:0;font-weight:700}
table{width:100%;border-collapse:collapse;margin-top:14px}
th,td{border-bottom:1px solid #1e293b;padding:8px;text-align:center}
input,select{
  width:100%;
  padding:8px;
  background:#020617;
  color:var(--text);
  border:1px solid #1e293b;
}
button.primary{
  background:var(--accent);
  border:none;
  padding:10px;
  width:100%;
  margin-top:10px;
  font-weight:700;
  cursor:pointer;
}
.green{color:var(--green)}
.red{color:var(--red)}
.login{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.login-box{
  background:var(--card);
  padding:30px;
  border-radius:12px;
  width:280px;
}
</style>
</head>

<body>

<div class="login" id="login">
  <div class="login-box">
    <h2>KANDAR CAPITAL</h2>
    <p>Masukkan PIN</p>
    <input id="pin" type="password" placeholder="PIN">
    <button class="primary" onclick="login()">MASUK</button>
  </div>
</div>

<div id="app" style="display:none">

<header>KANDAR CAPITAL â€“ Trading Journal</header>

<nav>
  <button onclick="show('dash')" class="active">Dashboard</button>
  <button onclick="show('journal')">Journal</button>
  <button onclick="show('stats')">Statistik</button>
  <button onclick="show('portfolio')">Portfolio</button>
</nav>

<section id="dash" class="active">
  <div class="cards">
    <div class="card"><h3>Total Balance</h3><p id="balance">$0</p></div>
    <div class="card"><h3>Total Profit</h3><p id="profit">$0</p></div>
    <div class="card"><h3>Winrate</h3><p id="winrate">0%</p></div>
    <div class="card"><h3>Total Trade</h3><p id="totalTrade">0</p></div>
  </div>
  <canvas id="equity" height="120"></canvas>
</section>

<section id="journal">
  <div class="card">
    <h3>Tambah Trade</h3>
    <input id="pair" placeholder="Pair (XAUUSD)">
    <select id="type">
      <option>BUY</option><option>SELL</option>
    </select>
    <input id="profitInput" type="number" placeholder="Profit / Loss ($)">
    <button class="primary" onclick="addTrade()">SIMPAN TRADE</button>
  </div>

  <table>
    <thead><tr><th>Pair</th><th>Type</th><th>P/L</th></tr></thead>
    <tbody id="table"></tbody>
  </table>
</section>

<section id="stats">
  <div class="cards">
    <div class="card"><h3>Win</h3><p id="win">0</p></div>
    <div class="card"><h3>Loss</h3><p id="loss">0</p></div>
    <div class="card"><h3>Max Drawdown</h3><p id="dd">$0</p></div>
  </div>
</section>

<section id="portfolio">
  <div class="card">
    <h3>Modal Awal</h3>
    <input id="modal" type="number" placeholder="Modal awal">
    <button class="primary" onclick="setModal()">SIMPAN</button>
  </div>
</section>

</div>

<script>
let data=JSON.parse(localStorage.getItem('trades')||"[]");
let modal=localStorage.getItem('modal')||0;

function login(){
  if(document.getElementById('pin').value==="258369"){
    login.style.display="none";
    app.style.display="block";
    render();
  }else alert("PIN SALAH");
}

function show(id){
  document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
}

function addTrade(){
  data.push({
    pair:pair.value,
    type:type.value,
    profit:Number(profitInput.value)
  });
  localStorage.setItem('trades',JSON.stringify(data));
  render();
}

function setModal(){
  modal=modal.value;
  localStorage.setItem('modal',modal);
  render();
}

function render(){
  let total=0,win=0,loss=0;
  table.innerHTML="";
  data.forEach(t=>{
    total+=t.profit;
    t.profit>0?win++:loss++;
    table.innerHTML+=`<tr><td>${t.pair}</td><td>${t.type}</td><td class="${t.profit>0?'green':'red'}">$${t.profit}</td></tr>`;
  });
  balance.innerText="$"+(Number(modal)+total);
  profit.innerText="$"+total;
  totalTrade.innerText=data.length;
  winrate.innerText=data.length?Math.round(win/data.length*100)+"%":"0%";
  win.innerText=win;
  loss.innerText=loss;
  drawChart();
}

function drawChart(){
  const ctx=document.getElementById('equity');
  let eq=[],sum=Number(modal);
  data.forEach(t=>{sum+=t.profit;eq.push(sum)});
  new Chart(ctx,{
    type:'line',
    data:{labels:eq.map((_,i)=>i+1),datasets:[{data:eq,borderColor:'#3b82f6'}]},
    options:{plugins:{legend:{display:false}}}
  });
}
</script>
</body>
</html>
